name = "bluemap-worker"
main = "src/index.ts"
compatibility_date = "2024-12-30"

# Optional: smart placement for better performance and reliability across the globe. This will route requests to the nearest Cloudflare data center.
[placement]
mode = "smart"

# Static web app files (index.html, assets/, lang/, settings.json)
# are served directly from the edge — no R2 reads needed.
[assets]
directory = "./public"
binding = "ASSETS"
# Requests not matched by static assets fall through to the worker,
# which serves map data from R2.
not_found_handling = "none"

# R2 bucket binding — only used for map data (maps/**)
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "bluemap"
remote = true # Force remote for local development since the R2 bucket is simulated by default and not using the remote data.

# Optional: if you want live player markers, set the origin of your
# BlueMap integrated webserver (the Minecraft server plugin's built-in web server).
# Uncomment and set the URL below, then the worker will proxy /maps/*/live/* requests there.
# [vars]
# LIVE_SERVER_ORIGIN = "http://your-minecraft-server:8100"

# Optional: custom domain / route configuration
# [env.production]
# routes = [{ pattern = "map.example.com/*", zone_name = "example.com" }]
